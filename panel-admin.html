<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n - EPA 703</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/admin-dashboard.css">
</head>
<style>
    /* Tabs */
.tabs-container {
    margin-top: 30px;
}

.tabs-nav {
    display: flex;
    gap: 10px;
    border-bottom: 2px solid #e0e0e0;
    margin-bottom: 30px;
}

.tab-btn {
    padding: 12px 24px;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #666;
    transition: all 0.3s ease;
}

.tab-btn:hover {
    color: #1e3a2e;
    background: #f5f5f5;
}

.tab-btn.active {
    color: #1e3a2e;
    border-bottom-color: #1e3a2e;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

/* Report Cards */
.report-section {
    margin-bottom: 40px;
}

.report-section h3 {
    color: #1e3a2e;
    margin-bottom: 20px;
    font-size: 20px;
}

.report-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.report-card {
    background: white;
    padding: 25px;
    border-radius: 12px;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.report-icon {
    font-size: 32px;
    margin-bottom: 15px;
}

.report-card h4 {
    color: #1e3a2e;
    margin-bottom: 10px;
    font-size: 18px;
}

.report-card p {
    color: #666;
    margin-bottom: 15px;
    font-size: 14px;
}

.report-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

/* Charts */
.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.chart-container {
    background: white;
    padding: 20px;
    border-radius: 12px;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.chart-container h4 {
    color: #1e3a2e;
    margin-bottom: 15px;
    font-size: 16px;
}

/* Filters */
.report-filters {
    background: white;
    padding: 25px;
    border-radius: 12px;
    border: 1px solid #e0e0e0;
    margin-bottom: 20px;
}

.report-filters h4 {
    color: #1e3a2e;
    margin-bottom: 20px;
}

.filter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
}

.filter-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

/* Config Forms */
.config-section {
    background: white;
    padding: 30px;
    border-radius: 12px;
    border: 1px solid #e0e0e0;
    margin-bottom: 30px;
}

.config-section h3 {
    color: #1e3a2e;
    margin-bottom: 25px;
    font-size: 20px;
}

.config-form .form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.config-form .form-group {
    display: flex;
    flex-direction: column;
}

.config-form label {
    font-weight: 500;
    margin-bottom: 8px;
    color: #333;
}

.config-form .form-input {
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
}

.form-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 25px;
    padding-top: 25px;
    border-top: 1px solid #e0e0e0;
}

/* Templates */
.template-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.template-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
}

.template-info h4 {
    color: #1e3a2e;
    margin-bottom: 5px;
    font-size: 16px;
}

.template-info p {
    color: #666;
    font-size: 14px;
    margin: 0;
}

/* System Info */
.system-info {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.info-row {
    display: flex;
    justify-content: space-between;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 6px;
}

.info-label {
    font-weight: 600;
    color: #333;
}

.info-value {
    color: #666;
}

/* Maintenance */
.maintenance-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
}

/* Logs */
.logs-viewer {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
}

.logs-filters {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.logs-content {
    background: white;
    padding: 20px;
    border-radius: 6px;
    max-height: 400px;
    overflow-y: auto;
    font-family: 'Courier New', monospace;
    font-size: 12px;
}

/* Danger Zone */
.danger-zone {
    background: #fff5f5;
    padding: 20px;
    border-radius: 8px;
    border: 2px solid #ffebee;
}

.danger-zone p {
    color: #d32f2f;
    margin-bottom: 15px;
    font-weight: 500;
}

.danger-zone .btn {
    margin-right: 10px;
    margin-bottom: 10px;
}

/* Checkbox Group */
.checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 10px;
}

.checkbox-group label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: normal;
}

/* Roles Table */
.roles-table {
    overflow-x: auto;
}

.roles-table .data-table {
    width: 100%;
}

.roles-table td, .roles-table th {
    text-align: center;
    padding: 12px;
}

.roles-table td:first-child {
    text-align: left;
    font-weight: 500;
}

/* Report Stats Grid */
.report-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.stat-box {
    background: white;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    text-align: center;
}

.stat-box .stat-number {
    display: block;
    font-size: 28px;
    font-weight: 700;
    color: #1e3a2e;
    margin-bottom: 5px;
}

.stat-box .stat-label {
    display: block;
    font-size: 12px;
    color: #666;
    text-transform: uppercase;
}

/* Ciclos Config */
.ciclos-config {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.ciclo-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
}

.ciclo-item h4 {
    color: #1e3a2e;
    margin-bottom: 5px;
}

.ciclo-item p {
    color: #666;
    font-size: 14px;
    margin: 0;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h1 class="header-title">EPA 703 - Administraci√≥n</h1>
            </div>
            <div class="header-right">
                <div class="notification-bell">
                    <span class="bell-icon">üîî</span>
                    <span class="notification-count" id="notificationCount">0</span>
                </div>
                <div class="user-menu">
                    <div class="user-avatar">
                        <span id="userInitials">AD</span>
                    </div>
                    <div class="user-info">
                        <span class="user-name" id="userName">Administrador</span>
                        <span class="user-role">Administrador</span>
                    </div>
                    <div class="user-dropdown">
                        <a href="#" onclick="showProfile()">Mi Perfil</a>
                        <a href="#" onclick="showSettings()">Configuraci√≥n</a>
                        <a href="#" onclick="logout()">Cerrar Sesi√≥n</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <div class="logo">
                <div class="logo-icon">EPA</div>
                <span class="logo-text">703</span>
            </div>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="showSection('dashboard')">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('usuarios')">
                        <span class="nav-icon">üë•</span>
                        <span class="nav-text">Usuarios</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('consultas')">
                        <span class="nav-icon">üí¨</span>
                        <span class="nav-text">Consultas</span>
                        <span class="nav-badge" id="consultasBadge">0</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('inscripciones')">
                        <span class="nav-icon">üìù</span>
                        <span class="nav-text">Inscripciones</span>
                        <span class="nav-badge" id="inscripcionesBadge">0</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('estudiantes')">
                        <span class="nav-icon">üéì</span>
                        <span class="nav-text">Estudiantes</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('profesores')">
                        <span class="nav-icon">üë®‚Äçüè´</span>
                        <span class="nav-text">Profesores</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('cursos')">
                        <span class="nav-icon">üìö</span>
                        <span class="nav-text">Cursos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('reportes')">
                        <span class="nav-icon">üìà</span>
                        <span class="nav-text">Reportes</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('configuracion')">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Configuraci√≥n</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active">
            <div class="section-header">
                <h2>Dashboard</h2>
                <p>Resumen general del sistema EPA 703</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-content">
                        <h3 id="totalUsuarios">0</h3>
                        <p>Total Usuarios</p>
                        <span class="stat-change positive">+5% este mes</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéì</div>
                    <div class="stat-content">
                        <h3 id="totalEstudiantes">0</h3>
                        <p>Estudiantes Activos</p>
                        <span class="stat-change positive">+12% este mes</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí¨</div>
                    <div class="stat-content">
                        <h3 id="consultasPendientes">0</h3>
                        <p>Consultas Pendientes</p>
                        <span class="stat-change negative">-3% esta semana</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìù</div>
                    <div class="stat-content">
                        <h3 id="inscripcionesNuevas">0</h3>
                        <p>Nuevas Inscripciones</p>
                        <span class="stat-change positive">+8% este mes</span>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3>Acciones R√°pidas</h3>
                <div class="action-buttons">
                    <button class="action-btn" onclick="showSection('usuarios'); showModal('nuevoUsuario')">
                        <span class="action-icon">‚ûï</span>
                        Nuevo Usuario
                    </button>
                    <button class="action-btn" onclick="showSection('consultas')">
                        <span class="action-icon">üí¨</span>
                        Ver Consultas
                    </button>
                    <button class="action-btn" onclick="showSection('inscripciones')">
                        <span class="action-icon">üìù</span>
                        Gestionar Inscripciones
                    </button>
                    <button class="action-btn" onclick="showSection('reportes')">
                        <span class="action-icon">üìä</span>
                        Generar Reporte
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <h3>Actividad Reciente</h3>
                <div class="activity-list" id="activityList">
                    <div class="activity-item">
                        <div class="activity-icon">üë§</div>
                        <div class="activity-content">
                            <p><strong>Nuevo usuario registrado:</strong> Juan P√©rez</p>
                            <span class="activity-time">Hace 2 horas</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">üí¨</div>
                        <div class="activity-content">
                            <p><strong>Nueva consulta:</strong> Informaci√≥n sobre horarios</p>
                            <span class="activity-time">Hace 4 horas</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">üìù</div>
                        <div class="activity-content">
                            <p><strong>Inscripci√≥n procesada:</strong> Mar√≠a Gonz√°lez aprobada</p>
                            <span class="activity-time">Hace 6 horas</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Usuarios Section -->
        <section id="usuarios" class="content-section">
            <div class="section-header">
                <h2>Gesti√≥n de Usuarios</h2>
                <button class="btn btn-primary" onclick="showModal('nuevoUsuario')">
                    <span>‚ûï</span> Nuevo Usuario
                </button>
            </div>

            <!-- Filters -->
            <div class="filters">
                <div class="filter-group">
                    <label>Tipo de Usuario:</label>
                    <select id="filtroTipoUsuario" onchange="filtrarUsuarios()">
                        <option value="">Todos</option>
                        <option value="estudiante">Estudiantes</option>
                        <option value="profesor">Profesores</option>
                        <option value="admin">Administradores</option>
                        <option value="secretario">Secretarios</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Estado:</label>
                    <select id="filtroEstado" onchange="filtrarUsuarios()">
                        <option value="">Todos</option>
                        <option value="1">Activos</option>
                        <option value="0">Inactivos</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Buscar:</label>
                    <input type="text" id="buscarUsuario" placeholder="Nombre, email..." onkeyup="filtrarUsuarios()">
                </div>
            </div>

            <!-- Users Table -->
            <div class="table-container">
                <table class="data-table" id="usuariosTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Tipo</th>
                            <th>Estado</th>
                            <th>Registro</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="usuariosTableBody">
                        <!-- Los usuarios se cargar√°n aqu√≠ din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Consultas Section -->
        <section id="consultas" class="content-section">
            <div class="section-header">
                <h2>Gesti√≥n de Consultas</h2>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportarConsultas()">
                        <span>üì•</span> Exportar
                    </button>
                    <button class="btn btn-primary" onclick="responderMasivo()">
                        <span>üìß</span> Respuesta Masiva
                    </button>
                </div>
            </div>

            <!-- Consultas Stats -->
            <div class="consultas-stats">
                <div class="stat-item">
                    <span class="stat-number" id="consultasTotales">0</span>
                    <span class="stat-label">Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="consultasPendientesCount">0</span>
                    <span class="stat-label">Pendientes</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="consultasRespondidas">0</span>
                    <span class="stat-label">Respondidas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="consultasHoy">0</span>
                    <span class="stat-label">Hoy</span>
                </div>
            </div>

            <!-- Consultas Filters -->
            <div class="filters">
                <div class="filter-group">
                    <label>Estado:</label>
                    <select id="filtroEstadoConsulta" onchange="filtrarConsultas()">
                        <option value="">Todas</option>
                        <option value="pendiente">Pendientes</option>
                        <option value="respondida">Respondidas</option>
                        <option value="cerrada">Cerradas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Tipo:</label>
                    <select id="filtroTipoConsulta" onchange="filtrarConsultas()">
                        <option value="">Todos</option>
                        <option value="general">General</option>
                        <option value="inscripcion">Inscripci√≥n</option>
                        <option value="academica">Acad√©mica</option>
                        <option value="administrativa">Administrativa</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Prioridad:</label>
                    <select id="filtroPrioridad" onchange="filtrarConsultas()">
                        <option value="">Todas</option>
                        <option value="urgente">Urgente</option>
                        <option value="alta">Alta</option>
                        <option value="media">Media</option>
                        <option value="baja">Baja</option>
                    </select>
                </div>
            </div>

            <!-- Consultas Table -->
            <div class="table-container">
                <table class="data-table" id="consultasTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Asunto</th>
                            <th>Tipo</th>
                            <th>Prioridad</th>
                            <th>Estado</th>
                            <th>Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="consultasTableBody">
                        <!-- Las consultas se cargar√°n aqu√≠ din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Inscripciones Section -->
        <section id="inscripciones" class="content-section">
            <div class="section-header">
                <h2>Gesti√≥n de Inscripciones</h2>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportarInscripciones()">
                        <span>üì•</span> Exportar
                    </button>
                    <button class="btn btn-success" onclick="procesarMasivo()">
                        <span>‚ö°</span> Procesar Masivo
                    </button>
                </div>
            </div>

            <!-- Inscripciones Stats -->
            <div class="inscripciones-stats">
                <div class="stat-item">
                    <span class="stat-number" id="inscripcionesTotales">0</span>
                    <span class="stat-label">Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="inscripcionesPendientesCount">0</span>
                    <span class="stat-label">Pendientes</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="inscripcionesAprobadas">0</span>
                    <span class="stat-label">Aprobadas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="inscripcionesRechazadas">0</span>
                    <span class="stat-label">Rechazadas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="inscripcionesHoy">0</span>
                    <span class="stat-label">Hoy</span>
                </div>
            </div>

            <!-- Inscripciones Filters -->
            <div class="filters">
                <div class="filter-group">
                    <label>Estado:</label>
                    <select id="filtroEstadoInscripcion" onchange="filtrarInscripciones()">
                        <option value="">Todas</option>
                        <option value="pendiente">Pendientes</option>
                        <option value="aprobada">Aprobadas</option>
                        <option value="rechazada">Rechazadas</option>
                        <option value="en_revision">En Revisi√≥n</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Orientaci√≥n:</label>
                    <select id="filtroOrientacion" onchange="filtrarInscripciones()">
                        <option value="">Todas</option>
                        <option value="1">Primer Ciclo</option>
                        <option value="2">Segundo Ciclo</option>
                        <option value="3">Alfabetizaci√≥n</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>A√±o:</label>
                    <select id="filtroAnio" onchange="filtrarInscripciones()">
                        <option value="">Todos</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Buscar:</label>
                    <input type="text" id="buscarInscripcion" placeholder="Nombre, DNI, email..." onkeyup="filtrarInscripciones()">
                </div>
            </div>

            <!-- Inscripciones Table -->
            <div class="table-container">
                <table class="data-table" id="inscripcionesTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre Completo</th>
                            <th>Email</th>
                            <th>DNI</th>
                            <th>Orientaci√≥n</th>
                            <th>Estado</th>
                            <th>Fecha</th>
                            <th>Documentos</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="inscripcionesTableBody">
                        <!-- Las inscripciones se cargar√°n aqu√≠ din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Estudiantes Section -->
        <section id="estudiantes" class="content-section">
            <div class="section-header">
                <h2>Gesti√≥n de Estudiantes</h2>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportarEstudiantes()">
                        <span>üì•</span> Exportar
                    </button>
                    <button class="btn btn-primary" onclick="showModal('nuevoEstudiante')">
                        <span>‚ûï</span> Nuevo Estudiante
                    </button>
                </div>
            </div>

            <!-- Estudiantes Stats -->
            <div class="estudiantes-stats">
                <div class="stat-item">
                    <span class="stat-number" id="estudiantesTotales">0</span>
                    <span class="stat-label">Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="estudiantesActivos">0</span>
                    <span class="stat-label">Activos</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="estudiantesGraduados">0</span>
                    <span class="stat-label">Graduados</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="estudiantesNuevos">0</span>
                    <span class="stat-label">Nuevos este mes</span>
                </div>
            </div>

            <!-- Estudiantes Filters -->
            <div class="filters">
                <div class="filter-group">
                    <label>Estado:</label>
                    <select id="filtroEstadoEstudiante" onchange="filtrarEstudiantes()">
                        <option value="">Todos</option>
                        <option value="activo">Activos</option>
                        <option value="inactivo">Inactivos</option>
                        <option value="graduado">Graduados</option>
                        <option value="desertor">Desertores</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Curso:</label>
                    <select id="filtroCurso" onchange="filtrarEstudiantes()">
                        <option value="">Todos</option>
                        <!-- Se llenar√°n din√°micamente -->
                    </select>
                </div>
                <div class="filter-group">
                    <label>Orientaci√≥n:</label>
                    <select id="filtroOrientacionEst" onchange="filtrarEstudiantes()">
                        <option value="">Todas</option>
                        <option value="1">Primer Ciclo</option>
                        <option value="2">Segundo Ciclo</option>
                        <option value="3">Alfabetizaci√≥n</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Buscar:</label>
                    <input type="text" id="buscarEstudiante" placeholder="Nombre, legajo, email..." onkeyup="filtrarEstudiantes()">
                </div>
            </div>

            <!-- Estudiantes Table -->
            <div class="table-container">
                <table class="data-table" id="estudiantesTable">
                    <thead>
                        <tr>
                            <th>Legajo</th>
                            <th>Nombre Completo</th>
                            <th>Email</th>
                            <th>Curso</th>
                            <th>Orientaci√≥n</th>
                            <th>Estado</th>
                            <th>Fecha Ingreso</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="estudiantesTableBody">
                        <!-- Los estudiantes se cargar√°n aqu√≠ din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Profesores Section -->
        <section id="profesores" class="content-section">
            <div class="section-header">
                <h2>Gesti√≥n de Profesores</h2>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportarProfesores()">
                        <span>üì•</span> Exportar
                    </button>
                    <button class="btn btn-primary" onclick="showModal('nuevoProfesor')">
                        <span>‚ûï</span> Nuevo Profesor
                    </button>
                </div>
            </div>

            <!-- Profesores Stats -->
            <div class="profesores-stats">
                <div class="stat-item">
                    <span class="stat-number" id="profesoresTotales">0</span>
                    <span class="stat-label">Total</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="profesoresActivos">0</span>
                    <span class="stat-label">Activos</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="profesoresLicencia">0</span>
                    <span class="stat-label">En Licencia</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="profesoresNuevos">0</span>
                    <span class="stat-label">Nuevos este mes</span>
                </div>
            </div>

            <!-- Profesores Filters -->
            <div class="filters">
                <div class="filter-group">
                    <label>Estado:</label>
                    <select id="filtroEstadoProfesor" onchange="filtrarProfesores()">
                        <option value="">Todos</option>
                        <option value="activo">Activos</option>
                        <option value="licencia">En Licencia</option>
                        <option value="inactivo">Inactivos</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Especialidad:</label>
                    <select id="filtroEspecialidad" onchange="filtrarProfesores()">
                        <option value="">Todas</option>
                        <!-- Se llenar√°n din√°micamente -->
                    </select>
                </div>
                <div class="filter-group">
                    <label>Buscar:</label>
                    <input type="text" id="buscarProfesor" placeholder="Nombre, legajo, especialidad..." onkeyup="filtrarProfesores()">
                </div>
            </div>

            <!-- Profesores Table -->
            <div class="table-container">
                <table class="data-table" id="profesoresTable">
                    <thead>
                        <tr>
                            <th>Legajo</th>
                            <th>Nombre Completo</th>
                            <th>Email</th>
                            <th>Especialidad</th>
                            <th>T√≠tulo</th>
                            <th>Estado</th>
                            <th>Fecha Ingreso</th>
                            <th>Carga Horaria</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="profesoresTableBody">
                        <!-- Los profesores se cargar√°n aqu√≠ din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Cursos Section -->
        <section id="cursos" class="content-section">
            <div class="section-header">
                <h2>Gesti√≥n de Cursos</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="showModal('nuevoCurso')">
                        <span>‚ûï</span> Nuevo Curso
                    </button>
                </div>
            </div>

            <!-- Cursos Grid -->
            <div class="cursos-grid" id="cursosGrid">
                <!-- Los cursos se cargar√°n aqu√≠ din√°micamente -->
            </div>
        </section>

    
<section id="reportes" class="content-section">
    <div class="section-header">
        <h2>üìà Reportes y Estad√≠sticas</h2>
        <p>An√°lisis detallado y exportaci√≥n de datos</p>
    </div>

    <!-- Tabs de Reportes -->
    <div class="tabs-container">
        <div class="tabs-nav">
            <button class="tab-btn active" onclick="showReportTab('general')">General</button>
            <button class="tab-btn" onclick="showReportTab('estudiantes')">Estudiantes</button>
            <button class="tab-btn" onclick="showReportTab('profesores')">Profesores</button>
            <button class="tab-btn" onclick="showReportTab('academico')">Acad√©mico</button>
            <button class="tab-btn" onclick="showReportTab('financiero')">Financiero</button>
        </div>

        <!-- Tab General -->
        <div id="tab-general" class="tab-content active">
            <div class="report-section">
                <h3>Reportes Generales</h3>
                
                <div class="report-cards">
                    <div class="report-card">
                        <div class="report-icon">üìä</div>
                        <h4>Resumen Mensual</h4>
                        <p>Estad√≠sticas generales del mes actual</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-secondary" onclick="generarReporte('mensual', 'preview')">
                                üëÅÔ∏è Vista Previa
                            </button>
                            <button class="btn btn-sm btn-primary" onclick="generarReporte('mensual', 'pdf')">
                                üìÑ Descargar PDF
                            </button>
                            <button class="btn btn-sm btn-success" onclick="generarReporte('mensual', 'excel')">
                                üìë Exportar Excel
                            </button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üìÖ</div>
                        <h4>Reporte Anual</h4>
                        <p>Estad√≠sticas anuales completas</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-secondary" onclick="generarReporte('anual', 'preview')">
                                üëÅÔ∏è Vista Previa
                            </button>
                            <button class="btn btn-sm btn-primary" onclick="generarReporte('anual', 'pdf')">
                                üìÑ Descargar PDF
                            </button>
                            <button class="btn btn-sm btn-success" onclick="generarReporte('anual', 'excel')">
                                üìë Exportar Excel
                            </button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üéØ</div>
                        <h4>Reporte Personalizado</h4>
                        <p>Crea tu propio reporte con filtros espec√≠ficos</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-primary" onclick="showModal('reportePersonalizado')">
                                ‚öôÔ∏è Configurar Reporte
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gr√°ficos de Tendencias -->
            <div class="report-section">
                <h3>Tendencias y An√°lisis</h3>
                <div class="charts-grid">
                    <div class="chart-container">
                        <h4>Inscripciones por Mes</h4>
                        <canvas id="chartInscripciones" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>Estudiantes Activos vs Graduados</h4>
                        <canvas id="chartEstudiantes" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>Distribuci√≥n por Ciclo</h4>
                        <canvas id="chartCiclos" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>Consultas por Tipo</h4>
                        <canvas id="chartConsultas" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Estudiantes -->
        <div id="tab-estudiantes" class="tab-content">
            <div class="report-section">
                <h3>Reportes de Estudiantes</h3>
                
                <div class="report-filters">
                    <h4>Filtros de Reporte</h4>
                    <div class="filter-grid">
                        <div class="form-group">
                            <label>Ciclo:</label>
                            <select id="reporteCiclo">
                                <option value="">Todos</option>
                                <option value="1">Primer Ciclo</option>
                                <option value="2">Segundo Ciclo</option>
                                <option value="3">Tercer Ciclo</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Estado:</label>
                            <select id="reporteEstado">
                                <option value="">Todos</option>
                                <option value="activo">Activos</option>
                                <option value="inactivo">Inactivos</option>
                                <option value="graduado">Graduados</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Desde:</label>
                            <input type="date" id="reporteFechaDesde">
                        </div>
                        <div class="form-group">
                            <label>Hasta:</label>
                            <input type="date" id="reporteFechaHasta">
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="btn btn-primary" onclick="generarReporteEstudiantes()">
                            üìä Generar Reporte
                        </button>
                        <button class="btn btn-success" onclick="exportarReporteEstudiantes('excel')">
                            üìë Exportar Excel
                        </button>
                        <button class="btn btn-secondary" onclick="exportarReporteEstudiantes('pdf')">
                            üìÑ Exportar PDF
                        </button>
                    </div>
                </div>

                <div class="report-stats-grid">
                    <div class="stat-box">
                        <span class="stat-number" id="reporteEstTotal">0</span>
                        <span class="stat-label">Total Estudiantes</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="reporteEstActivos">0</span>
                        <span class="stat-label">Activos</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="reporteEstGraduados">0</span>
                        <span class="stat-label">Graduados</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="reporteEstDesercion">0%</span>
                        <span class="stat-label">Tasa Deserci√≥n</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Profesores -->
        <div id="tab-profesores" class="tab-content">
            <div class="report-section">
                <h3>Reportes de Profesores</h3>
                
                <div class="report-cards">
                    <div class="report-card">
                        <div class="report-icon">üë®‚Äçüè´</div>
                        <h4>Listado de Profesores</h4>
                        <p>Todos los profesores activos con sus datos</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-primary" onclick="exportarProfesores('pdf')">üìÑ PDF</button>
                            <button class="btn btn-sm btn-success" onclick="exportarProfesores('excel')">üìë Excel</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üìö</div>
                        <h4>Carga Horaria</h4>
                        <p>Distribuci√≥n de horas por profesor</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-primary" onclick="reporteCargaHoraria('pdf')">üìÑ PDF</button>
                            <button class="btn btn-sm btn-success" onclick="reporteCargaHoraria('excel')">üìë Excel</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üìã</div>
                        <h4>Asignaci√≥n de Materias</h4>
                        <p>Materias asignadas por profesor</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-primary" onclick="reporteAsignaciones('pdf')">üìÑ PDF</button>
                            <button class="btn btn-sm btn-success" onclick="reporteAsignaciones('excel')">üìë Excel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Acad√©mico -->
        <div id="tab-academico" class="tab-content">
            <div class="report-section">
                <h3>Reportes Acad√©micos</h3>
                
                <div class="report-cards">
                    <div class="report-card">
                        <div class="report-icon">üìä</div>
                        <h4>Rendimiento Acad√©mico</h4>
                        <p>Estad√≠sticas de calificaciones por curso</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-secondary" onclick="verRendimiento()">üëÅÔ∏è Ver</button>
                            <button class="btn btn-sm btn-primary" onclick="exportarRendimiento('pdf')">üìÑ PDF</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üìÖ</div>
                        <h4>Asistencias</h4>
                        <p>Reporte de asistencias por per√≠odo</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-secondary" onclick="verAsistencias()">üëÅÔ∏è Ver</button>
                            <button class="btn btn-sm btn-primary" onclick="exportarAsistencias('pdf')">üìÑ PDF</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üéì</div>
                        <h4>Certificados Emitidos</h4>
                        <p>Historial de certificados y diplomas</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-secondary" onclick="verCertificados()">üëÅÔ∏è Ver</button>
                            <button class="btn btn-sm btn-primary" onclick="exportarCertificados('pdf')">üìÑ PDF</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">üìà</div>
                        <h4>Tasa de Finalizaci√≥n</h4>
                        <p>Porcentaje de estudiantes que completan los ciclos</p>
                        <div class="report-actions">
                            <button class="btn btn-sm btn-secondary" onclick="verTasaFinalizacion()">üëÅÔ∏è Ver</button>
                            <button class="btn btn-sm btn-primary" onclick="exportarTasaFinalizacion('pdf')">üìÑ PDF</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Financiero -->
        <div id="tab-financiero" class="tab-content">
            <div class="report-section">
                <h3>Reportes Financieros</h3>
                <p style="text-align: center; padding: 40px; color: #666;">
                    üìä M√≥dulo financiero disponible pr√≥ximamente<br>
                    <small>EPA 703 es una escuela p√∫blica, por lo que no maneja pagos de alumnos</small>
                </p>
            </div>
        </div>
    </div>
</section>  

     <section id="configuracion" class="content-section">
    <div class="section-header">
        <h2>‚öôÔ∏è Configuraci√≥n del Sistema</h2>
        <p>Administra las preferencias y configuraci√≥n de EPA 703</p>
    </div>

    <!-- Tabs de Configuraci√≥n -->
    <div class="tabs-container">
        <div class="tabs-nav">
            <button class="tab-btn active" onclick="showConfigTab('general')">General</button>
            <button class="tab-btn" onclick="showConfigTab('email')">Email</button>
            <button class="tab-btn" onclick="showConfigTab('academico')">Acad√©mico</button>
            <button class="tab-btn" onclick="showConfigTab('usuarios')">Usuarios</button>
            <button class="tab-btn" onclick="showConfigTab('sistema')">Sistema</button>
        </div>

        <!-- Tab General -->
        <div id="config-general" class="tab-content active">
            <div class="config-section">
                <h3>Informaci√≥n de la Instituci√≥n</h3>
                <form id="formConfigGeneral" class="config-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nombre de la Instituci√≥n:</label>
                            <input type="text" id="config_nombre" value="EPA 703" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label>Nombre Completo:</label>
                            <input type="text" id="config_nombre_completo" value="Escuela Primaria para Adultos N¬∞703" class="form-input">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tel√©fono:</label>
                            <input type="tel" id="config_telefono" value="+54 11 1234-5678" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Email de Contacto:</label>
                            <input type="email" id="config_email" value="info@epa703.edu.ar" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Direcci√≥n:</label>
                        <input type="text" id="config_direccion" value="Av. Educaci√≥n 1234, Buenos Aires" class="form-input">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Horario de Atenci√≥n:</label>
                            <input type="text" id="config_horario" value="Lun a Vie: 14:00 - 22:00" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Sitio Web:</label>
                            <input type="url" id="config_sitio_web" value="https://epa703.edu.ar" class="form-input">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Guardar Cambios</button>
                        <button type="button" class="btn btn-secondary" onclick="resetConfigGeneral()">‚Ü∫ Restablecer</button>
                    </div>
                </form>
            </div>

            <div class="config-section">
                <h3>Redes Sociales</h3>
                <form id="formConfigRedes" class="config-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Facebook:</label>
                            <input type="url" id="config_facebook" placeholder="https://facebook.com/epa703" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Instagram:</label>
                            <input type="url" id="config_instagram" placeholder="https://instagram.com/epa703" class="form-input">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Twitter/X:</label>
                            <input type="url" id="config_twitter" placeholder="https://twitter.com/epa703" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>YouTube:</label>
                            <input type="url" id="config_youtube" placeholder="https://youtube.com/@epa703" class="form-input">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tab Email -->
        <div id="config-email" class="tab-content">
            <div class="config-section">
                <h3>Configuraci√≥n de Correo Electr√≥nico</h3>
                <form id="formConfigEmail" class="config-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Servidor SMTP:</label>
                            <input type="text" id="config_smtp_host" placeholder="smtp.gmail.com" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label>Puerto SMTP:</label>
                            <input type="number" id="config_smtp_port" value="587" class="form-input" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Usuario/Email SMTP:</label>
                            <input type="email" id="config_smtp_user" placeholder="noreply@epa703.edu.ar" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label>Contrase√±a SMTP:</label>
                            <input type="password" id="config_smtp_pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Encriptaci√≥n:</label>
                        <select id="config_smtp_encryption" class="form-input">
                            <option value="tls">TLS</option>
                            <option value="ssl">SSL</option>
                            <option value="none">Ninguna</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="probarEmail()">
                            üìß Enviar Email de Prueba
                        </button>
                        <button type="submit" class="btn btn-primary">üíæ Guardar Configuraci√≥n</button>
                    </div>
                </form>
            </div>

            <div class="config-section">
                <h3>Plantillas de Email</h3>
                <div class="template-list">
                    <div class="template-item">
                        <div class="template-info">
                            <h4>üéâ Email de Bienvenida</h4>
                            <p>Enviado a nuevos estudiantes al aprobar inscripci√≥n</p>
                        </div>
                        <button class="btn btn-sm btn-secondary" onclick="editarPlantilla('bienvenida')">
                            ‚úèÔ∏è Editar
                        </button>
                    </div>

                    <div class="template-item">
                        <div class="template-info">
                            <h4>‚úÖ Confirmaci√≥n de Inscripci√≥n</h4>
                            <p>Confirmaci√≥n autom√°tica al recibir solicitud</p>
                        </div>
                        <button class="btn btn-sm btn-secondary" onclick="editarPlantilla('confirmacion')">
                            ‚úèÔ∏è Editar
                        </button>
                    </div>

                    <div class="template-item">
                        <div class="template-info">
                            <h4>üîê Recuperaci√≥n de Contrase√±a</h4>
                            <p>Email para restablecer contrase√±a olvidada</p>
                        </div>
                        <button class="btn btn-sm btn-secondary" onclick="editarPlantilla('recuperacion')">
                            ‚úèÔ∏è Editar
                        </button>
                    </div>

                    <div class="template-item">
                        <div class="template-info">
                            <h4>üì¢ Notificaciones Generales</h4>
                            <p>Comunicaciones masivas a estudiantes</p>
                        </div>
                        <button class="btn btn-sm btn-secondary" onclick="editarPlantilla('notificacion')">
                            ‚úèÔ∏è Editar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Acad√©mico -->
        <div id="config-academico" class="tab-content">
            <div class="config-section">
                <h3>Configuraci√≥n Acad√©mica</h3>
                <form id="formConfigAcademico" class="config-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>A√±o Lectivo Actual:</label>
                            <input type="number" id="config_anio_lectivo" value="2024" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label>Per√≠odo de Inscripciones:</label>
                            <select id="config_periodo_inscripcion" class="form-input">
                                <option value="abierto">Abierto todo el a√±o</option>
                                <option value="enero-marzo">Enero - Marzo</option>
                                <option value="personalizado">Personalizado</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Fecha Inicio de Clases:</label>
                            <input type="date" id="config_inicio_clases" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Fecha Fin de Clases:</label>
                            <input type="date" id="config_fin_clases" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Duraci√≥n de Clase (minutos):</label>
                        <input type="number" id="config_duracion_clase" value="80" class="form-input" min="40" max="120">
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="config_inscripcion_online" checked>
                            Permitir inscripci√≥n online
                        </label>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="config_requiere_documentos" checked>
                            Requerir documentaci√≥n en inscripci√≥n
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Guardar Cambios</button>
                    </div>
                </form>
            </div>

            <div class="config-section">
                <h3>Ciclos y Cursos</h3>
                <div class="ciclos-config">
                    <div class="ciclo-item">
                        <h4>Primer Ciclo - Alfabetizaci√≥n Inicial</h4>
                        <p>Duraci√≥n: 2 a√±os | Capacidad m√°xima: 25 alumnos por divisi√≥n</p>
                        <button class="btn btn-sm btn-secondary" onclick="editarCiclo(1)">‚úèÔ∏è Editar</button>
                    </div>

                    <div class="ciclo-item">
                        <h4>Segundo Ciclo - Formaci√≥n Intermedia</h4>
                        <p>Duraci√≥n: 2 a√±os | Capacidad m√°xima: 25 alumnos por divisi√≥n</p>
                        <button class="btn btn-sm btn-secondary" onclick="editarCiclo(2)">‚úèÔ∏è Editar</button>
                    </div>

                    <div class="ciclo-item">
                        <h4>Tercer Ciclo - Finalizaci√≥n Primaria</h4>
                        <p>Duraci√≥n: 2 a√±os | Capacidad m√°xima: 25 alumnos por divisi√≥n</p>
                        <button class="btn btn-sm btn-secondary" onclick="editarCiclo(3)">‚úèÔ∏è Editar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Usuarios -->
        <div id="config-usuarios" class="tab-content">
            <div class="config-section">
                <h3>Configuraci√≥n de Usuarios</h3>
                <form id="formConfigUsuarios" class="config-form">
                    <div class="form-group">
                        <h4>Seguridad de Contrase√±as</h4>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="config_password_minimo" checked>
                                Longitud m√≠nima: <input type="number" value="8" min="6" max="20" style="width: 60px;"> caracteres
                            </label>
                            <label>
                                <input type="checkbox" id="config_password_mayusculas" checked>
                                Requerir may√∫sculas
                            </label>
                            <label>
                                <input type="checkbox" id="config_password_numeros" checked>
                                Requerir n√∫meros
                            </label>
                            <label>
                                <input type="checkbox" id="config_password_especiales">
                                Requerir caracteres especiales
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <h4>Sesiones</h4>
                        <label>Tiempo de inactividad antes de cerrar sesi√≥n (minutos):</label>
                        <input type="number" id="config_timeout_sesion" value="30" min="5" max="120" class="form-input">
                    </div>

                    <div class="form-group">
                        <h4>Registro de Usuarios</h4>
                        <label>
                            <input type="checkbox" id="config_registro_publico">
                            Permitir auto-registro de estudiantes
                        </label>
                        <label>
                            <input type="checkbox" id="config_verificacion_email" checked>
                            Requerir verificaci√≥n de email
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Guardar Configuraci√≥n</button>
                    </div>
                </form>
            </div>

            <div class="config-section">
                <h3>Permisos por Rol</h3>
                <div class="roles-table">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Permiso</th>
                                <th>Admin</th>
                                <th>Secretario</th>
                                <th>Profesor</th>
                                <th>Estudiante</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Gestionar usuarios</td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox" disabled></td>
                                <td><input type="checkbox" disabled></td>
                            </tr>
                            <tr>
                                <td>Ver todos los estudiantes</td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox" disabled></td>
                            </tr>
                            <tr>
                                <td>Cargar calificaciones</td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox" disabled></td>
                            </tr>
                            <tr>
                                <td>Generar reportes</td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" checked></td>
                                <td><input type="checkbox"></td>
                                <td><input type="checkbox" disabled></td>
                            </tr>
                            <tr>
                                <td>Modificar configuraci√≥n</td>
                                <td><input type="checkbox" checked disabled></td>
                                <td><input type="checkbox" disabled></td>
                                <td><input type="checkbox" disabled></td>
                                <td><input type="checkbox" disabled></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tab Sistema -->
        <div id="config-sistema" class="tab-content">
            <div class="config-section">
                <h3>Informaci√≥n del Sistema</h3>
                <div class="system-info">
                    <div class="info-row">
                        <span class="info-label">Versi√≥n del Sistema:</span>
                        <span class="info-value">EPA 703 v1.0.0</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Base de Datos:</span>
                        <span class="info-value">MySQL 8.0</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Servidor:</span>
                        <span class="info-value">Apache 2.4</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">PHP:</span>
                        <span class="info-value">8.1.0</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">√öltima Actualizaci√≥n:</span>
                        <span class="info-value">11/11/2024</span>
                    </div>
                </div>
            </div>

            <div class="config-section">
                <h3>Mantenimiento</h3>
                <div class="maintenance-actions">
                    <button class="btn btn-secondary" onclick="limpiarCache()">
                        üóëÔ∏è Limpiar Cach√©
                    </button>
                    <button class="btn btn-secondary" onclick="optimizarDB()">
                        ‚ö° Optimizar Base de Datos
                    </button>
                    <button class="btn btn-warning" onclick="backupDB()">
                        üíæ Crear Backup
                    </button>
                    <button class="btn btn-danger" onclick="confirmarMantenimiento()">
                        üîß Modo Mantenimiento
                    </button>
                </div>
            </div>

            <div class="config-section">
                <h3>Logs del Sistema</h3>
                <div class="logs-viewer">
                    <div class="logs-filters">
                        <select id="logTipo" class="form-input">
                            <option value="todos">Todos los logs</option>
                            <option value="error">Errores</option>
                            <option value="warning">Advertencias</option>
                            <option value="info">Informaci√≥n</option>
                        </select>
                        <button class="btn btn-secondary" onclick="cargarLogs()">üîÑ Actualizar</button>
                        <button class="btn btn-danger" onclick="limpiarLogs()">üóëÔ∏è Limpiar Logs</button>
                    </div>
                    <div id="logsContent" class="logs-content">
                        <p style="color: #666; text-align: center; padding: 20px;">
                            Selecciona un tipo de log y haz clic en Actualizar
                        </p>
                    </div>
                </div>
            </div>

            <div class="config-section">
                <h3>‚ö†Ô∏è Zona de Peligro</h3>
                <div class="danger-zone">
                    <p><strong>Acciones irreversibles:</strong> Usa estas opciones con extremo cuidado</p>
                    <button class="btn btn-danger" onclick="confirmarReiniciarSistema()">
                        üîÑ Reiniciar Sistema
                    </button>
                    <button class="btn btn-danger" onclick="confirmarResetearConfig()">
                        ‚Ü∫ Restablecer Configuraci√≥n
                    </button>
                    <button class="btn btn-danger" onclick="confirmarEliminarDatos()">
                        ‚ö†Ô∏è Eliminar Datos de Prueba
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>
    </main>

    <!-- Modales -->
    <!-- Modal Nuevo Usuario -->
    <div class="modal" id="nuevoUsuarioModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nuevo Usuario</h3>
                <button class="modal-close" onclick="closeModal('nuevoUsuario')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="nuevoUsuarioForm" onsubmit="crearUsuario(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nuevoNombre">Nombre *</label>
                            <input type="text" id="nuevoNombre" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label for="nuevoApellido">Apellido *</label>
                            <input type="text" id="nuevoApellido" name="apellido" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="nuevoEmail">Email *</label>
                        <input type="email" id="nuevoEmail" name="email" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nuevoTelefono">Tel√©fono</label>
                            <input type="tel" id="nuevoTelefono" name="telefono">
                        </div>
                        <div class="form-group">
                            <label for="nuevoDni">DNI</label>
                            <input type="text" id="nuevoDni" name="dni">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="nuevoTipoUsuario">Tipo de Usuario *</label>
                        <select id="nuevoTipoUsuario" name="tipo_usuario" required>
                            <option value="">Seleccionar...</option>
                            <option value="estudiante">Estudiante</option>
                            <option value="profesor">Profesor</option>
                            <option value="admin">Administrador</option>
                            <option value="secretario">Secretario</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="nuevoPassword">Contrase√±a *</label>
                        <input type="password" id="nuevoPassword" name="password" required>
                        <small>M√≠nimo 6 caracteres</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('nuevoUsuario')">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Crear Usuario</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Scripts -->
     <script src="js/modulo-rendimiento-academico.js"></script>
     <script>
        
        /**
 * EPA 703 - Funciones Completas del Panel de Administrador
 * Este archivo contiene todas las funciones necesarias para el funcionamiento del panel
 */

// ========================================
// FUNCIONES GLOBALES Y UTILIDADES
// ========================================

/**
 * Mostrar/ocultar secciones
 */
function showSection(sectionName) {
    console.log(`Mostrando secci√≥n: ${sectionName}`);
    
    // Ocultar todas las secciones
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // Remover active de todos los links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
    });
    
    // Mostrar secci√≥n seleccionada
    const targetSection = document.getElementById(sectionName);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    
    // Activar link correspondiente
    const navLink = document.querySelector(`[onclick="showSection('${sectionName}')"]`);
    if (navLink) {
        navLink.classList.add('active');
    }
    
    // Cargar datos de la secci√≥n
    loadSectionData(sectionName);
}

/**
 * Cargar datos seg√∫n la secci√≥n
 */
async function loadSectionData(sectionName) {
    switch(sectionName) {
        case 'dashboard':
            await loadDashboardData();
            break;
        case 'usuarios':
            await loadUsuarios();
            break;
        case 'consultas':
            await loadConsultas();
            break;
        case 'inscripciones':
            await loadInscripciones();
            break;
        case 'estudiantes':
            await loadEstudiantes();
            break;
        case 'profesores':
            await loadProfesores();
            break;
        case 'cursos':
            await loadCursos();
            break;
    }
}

/**
 * Mostrar/ocultar modales
 */
function showModal(modalName) {
    const modal = document.getElementById(modalName + 'Modal');
    if (modal) {
        modal.classList.add('active');
        modal.style.display = 'flex';
    }
}

function closeModal(modalName) {
    const modal = document.getElementById(modalName + 'Modal');
    if (modal) {
        modal.classList.remove('active');
        modal.style.display = 'none';
    }
}

// Cerrar modal al hacer click fuera
document.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal')) {
        e.target.style.display = 'none';
    }
});

/**
 * Notificaciones
 */
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <span>${message}</span>
        <button onclick="this.parentElement.remove()">&times;</button>
    `;
    
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        background: ${type === 'success' ? '#28a745' : type === 'danger' ? '#dc3545' : type === 'warning' ? '#ffc107' : '#17a2b8'};
        color: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        z-index: 10000;
        animation: slideInRight 0.3s ease;
        display: flex;
        align-items: center;
        gap: 15px;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// ========================================
// DASHBOARD
// ========================================

async function loadDashboardData() {
    console.log('Cargando datos del dashboard...');
    
    try {
        const response = await fetch('api/admin-dashboard-data.php');
        const data = await response.json();
        
        if (data.success) {
            updateDashboardStats(data.stats);
            updateActivityFeed(data.activity);
        } else {
            // Mostrar datos de ejemplo
            showExampleDashboardData();
        }
    } catch (error) {
        console.error('Error cargando dashboard:', error);
        showExampleDashboardData();
    }
}

function updateDashboardStats(stats) {
    document.getElementById('totalUsuarios').textContent = stats.total_users || '0';
    document.getElementById('totalEstudiantes').textContent = stats.students || '0';
    document.getElementById('totalProfesores').textContent = stats.teachers || '0';
    document.getElementById('consultasPendientes').textContent = stats.pending_consultations || '0';
    document.getElementById('totalConsultas').textContent = stats.total_consultations || '0';
    document.getElementById('consultasHoy').textContent = stats.consultations_today || '0';
}

function showExampleDashboardData() {
    document.getElementById('totalUsuarios').textContent = '150';
    document.getElementById('totalEstudiantes').textContent = '120';
    document.getElementById('totalProfesores').textContent = '25';
    document.getElementById('consultasPendientes').textContent = '8';
    document.getElementById('totalConsultas').textContent = '45';
    document.getElementById('consultasHoy').textContent = '3';
}

function updateActivityFeed(activities) {
    const activityList = document.getElementById('activityList');
    if (!activityList || !activities) return;
    
    activityList.innerHTML = activities.map(activity => `
        <div class="activity-item">
            <div class="activity-icon">${activity.icon || 'üìå'}</div>
            <div class="activity-content">
                <p>${activity.description}</p>
                <span class="activity-time">${activity.time}</span>
            </div>
        </div>
    `).join('');
}

// ========================================
// USUARIOS
// ========================================

let usuarios = [];

async function loadUsuarios() {
    console.log('Cargando usuarios...');
    
    try {
        const response = await fetch('api/usuarios.php');
        const data = await response.json();
        
        if (data.success) {
            usuarios = data.usuarios;
            renderUsuariosTable();
        } else {
            showExampleUsuarios();
        }
    } catch (error) {
        console.error('Error cargando usuarios:', error);
        showExampleUsuarios();
    }
}

function renderUsuariosTable() {
    const tbody = document.getElementById('usuariosTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = usuarios.map(usuario => `
        <tr>
            <td>${usuario.id}</td>
            <td>${usuario.nombre} ${usuario.apellido}</td>
            <td>${usuario.email}</td>
            <td>${getTipoBadge(usuario.tipo_usuario)}</td>
            <td>${getEstadoBadge(usuario.activo)}</td>
            <td>${formatDate(usuario.fecha_registro)}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-secondary" onclick="editarUsuario(${usuario.id})" title="Editar">‚úèÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="toggleUsuario(${usuario.id})" title="${usuario.activo ? 'Desactivar' : 'Activar'}">${usuario.activo ? 'üîí' : 'üîì'}</button>
                    <button class="btn btn-sm btn-danger" onclick="eliminarUsuario(${usuario.id})" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function showExampleUsuarios() {
    usuarios = [
        { id: 1, nombre: 'Juan', apellido: 'P√©rez', email: 'juan.perez@epa703.edu.ar', tipo_usuario: 'estudiante', activo: 1, fecha_registro: '2024-01-15' },
        { id: 2, nombre: 'Mar√≠a', apellido: 'Gonz√°lez', email: 'maria.gonzalez@epa703.edu.ar', tipo_usuario: 'profesor', activo: 1, fecha_registro: '2024-01-10' },
        { id: 3, nombre: 'Carlos', apellido: 'Rodr√≠guez', email: 'carlos.rodriguez@epa703.edu.ar', tipo_usuario: 'admin', activo: 1, fecha_registro: '2024-01-05' }
    ];
    renderUsuariosTable();
}

function filtrarUsuarios() {
    const tipoFiltro = document.getElementById('filtroTipoUsuario')?.value || '';
    const estadoFiltro = document.getElementById('filtroEstado')?.value || '';
    const busqueda = document.getElementById('buscarUsuario')?.value.toLowerCase() || '';
    
    const usuariosFiltrados = usuarios.filter(usuario => {
        const cumpleTipo = !tipoFiltro || usuario.tipo_usuario === tipoFiltro;
        const cumpleEstado = estadoFiltro === '' || usuario.activo == estadoFiltro;
        const cumpleBusqueda = !busqueda || 
            usuario.nombre.toLowerCase().includes(busqueda) ||
            usuario.apellido.toLowerCase().includes(busqueda) ||
            usuario.email.toLowerCase().includes(busqueda);
        
        return cumpleTipo && cumpleEstado && cumpleBusqueda;
    });
    
    renderUsuariosTableFiltered(usuariosFiltrados);
}

function renderUsuariosTableFiltered(usuariosFiltrados) {
    const tbody = document.getElementById('usuariosTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = usuariosFiltrados.map(usuario => `
        <tr>
            <td>${usuario.id}</td>
            <td>${usuario.nombre} ${usuario.apellido}</td>
            <td>${usuario.email}</td>
            <td>${getTipoBadge(usuario.tipo_usuario)}</td>
            <td>${getEstadoBadge(usuario.activo)}</td>
            <td>${formatDate(usuario.fecha_registro)}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-secondary" onclick="editarUsuario(${usuario.id})">‚úèÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="toggleUsuario(${usuario.id})">${usuario.activo ? 'üîí' : 'üîì'}</button>
                    <button class="btn btn-sm btn-danger" onclick="eliminarUsuario(${usuario.id})">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

async function crearUsuario(event) {
    event.preventDefault();
    
    const form = event.target;
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);
    
    try {
        const response = await fetch('api/crear-usuario.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            showNotification('‚úÖ Usuario creado exitosamente', 'success');
            closeModal('nuevoUsuario');
            form.reset();
            loadUsuarios();
        } else {
            showNotification('‚ùå Error: ' + result.message, 'danger');
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al crear usuario', 'danger');
    }
}

function editarUsuario(id) {
    const usuario = usuarios.find(u => u.id === id);
    if (!usuario) return;
    
    showNotification(`Editando usuario: ${usuario.nombre} ${usuario.apellido}`, 'info');
    // Aqu√≠ se abrir√≠a un modal de edici√≥n
}

async function toggleUsuario(id) {
    const usuario = usuarios.find(u => u.id === id);
    if (!usuario) return;
    
    const accion = usuario.activo ? 'desactivar' : 'activar';
    if (confirm(`¬øSeguro que deseas ${accion} este usuario?`)) {
        try {
            const response = await fetch('api/toggle-usuario.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id, activo: !usuario.activo })
            });
            
            const result = await response.json();
            
            if (result.success) {
                showNotification(`‚úÖ Usuario ${accion} correctamente`, 'success');
                loadUsuarios();
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al modificar usuario', 'danger');
        }
    }
}

async function eliminarUsuario(id) {
    if (confirm('‚ö†Ô∏è ¬øEst√°s seguro de eliminar este usuario? Esta acci√≥n no se puede deshacer.')) {
        try {
            const response = await fetch('api/eliminar-usuario.php', {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id })
            });
            
            const result = await response.json();
            
            if (result.success) {
                showNotification('‚úÖ Usuario eliminado', 'success');
                loadUsuarios();
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al eliminar usuario', 'danger');
        }
    }
}

// ========================================
// CONSULTAS
// ========================================

let consultas = [];

async function loadConsultas() {
    console.log('Cargando consultas...');
    
    try {
        const response = await fetch('api/consultas.php');
        const data = await response.json();
        
        if (data.success) {
            consultas = data.consultas;
            renderConsultasTable();
            updateConsultasBadge();
        } else {
            showExampleConsultas();
        }
    } catch (error) {
        console.error('Error cargando consultas:', error);
        showExampleConsultas();
    }
}

function renderConsultasTable() {
    const tbody = document.getElementById('consultasTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = consultas.map(consulta => `
        <tr>
            <td>${consulta.id}</td>
            <td>${consulta.nombre}</td>
            <td>${consulta.email}</td>
            <td>${consulta.asunto || consulta.tipo_consulta}</td>
            <td>${getTipoConsultaBadge(consulta.tipo_consulta)}</td>
            <td>${getPrioridadBadge(consulta.prioridad || 'media')}</td>
            <td>${getEstadoConsultaBadge(consulta.estado)}</td>
            <td>${formatDate(consulta.created_at)}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-primary" onclick="verConsulta(${consulta.id})" title="Ver">üëÅÔ∏è</button>
                    <button class="btn btn-sm btn-success" onclick="responderConsulta(${consulta.id})" title="Responder">‚úâÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="cerrarConsulta(${consulta.id})" title="Cerrar">‚úîÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function showExampleConsultas() {
    consultas = [
        { id: 1, nombre: 'Ana L√≥pez', email: 'ana@email.com', asunto: 'Consulta sobre inscripci√≥n', tipo_consulta: 'inscripcion', estado: 'pendiente', prioridad: 'alta', created_at: '2024-11-10' },
        { id: 2, nombre: 'Pedro Mart√≠nez', email: 'pedro@email.com', asunto: 'Horarios disponibles', tipo_consulta: 'general', estado: 'pendiente', prioridad: 'media', created_at: '2024-11-11' },
        { id: 3, nombre: 'Laura Garc√≠a', email: 'laura@email.com', asunto: 'Documentaci√≥n requerida', tipo_consulta: 'administrativa', estado: 'respondida', prioridad: 'baja', created_at: '2024-11-09' }
    ];
    renderConsultasTable();
}

function filtrarConsultas() {
    const estadoFiltro = document.getElementById('filtroEstadoConsulta')?.value || '';
    const tipoFiltro = document.getElementById('filtroTipoConsulta')?.value || '';
    const prioridadFiltro = document.getElementById('filtroPrioridad')?.value || '';
    
    const consultasFiltradas = consultas.filter(consulta => {
        const cumpleEstado = !estadoFiltro || consulta.estado === estadoFiltro;
        const cumpleTipo = !tipoFiltro || consulta.tipo_consulta === tipoFiltro;
        const cumplePrioridad = !prioridadFiltro || consulta.prioridad === prioridadFiltro;
        
        return cumpleEstado && cumpleTipo && cumplePrioridad;
    });
    
    renderConsultasTableFiltered(consultasFiltradas);
}

function renderConsultasTableFiltered(consultasFiltradas) {
    const tbody = document.getElementById('consultasTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = consultasFiltradas.map(consulta => `
        <tr>
            <td>${consulta.id}</td>
            <td>${consulta.nombre}</td>
            <td>${consulta.email}</td>
            <td>${consulta.asunto || consulta.tipo_consulta}</td>
            <td>${getTipoConsultaBadge(consulta.tipo_consulta)}</td>
            <td>${getPrioridadBadge(consulta.prioridad || 'media')}</td>
            <td>${getEstadoConsultaBadge(consulta.estado)}</td>
            <td>${formatDate(consulta.created_at)}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-primary" onclick="verConsulta(${consulta.id})">üëÅÔ∏è</button>
                    <button class="btn btn-sm btn-success" onclick="responderConsulta(${consulta.id})">‚úâÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="cerrarConsulta(${consulta.id})">‚úîÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function verConsulta(id) {
    const consulta = consultas.find(c => c.id === id);
    if (!consulta) return;
    
    showNotification(`Viendo consulta #${id}`, 'info');
    // Aqu√≠ se abrir√≠a un modal con los detalles
}

function responderConsulta(id) {
    const consulta = consultas.find(c => c.id === id);
    if (!consulta) return;
    
    showNotification(`Respondiendo consulta #${id}`, 'info');
    // Aqu√≠ se abrir√≠a un modal para responder
}

async function cerrarConsulta(id) {
    if (confirm('¬øMarcar esta consulta como cerrada?')) {
        try {
            const response = await fetch('api/cerrar-consulta.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id })
            });
            
            const result = await response.json();
            
            if (result.success) {
                showNotification('‚úÖ Consulta cerrada', 'success');
                loadConsultas();
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al cerrar consulta', 'danger');
        }
    }
}

function updateConsultasBadge() {
    const pendientes = consultas.filter(c => c.estado === 'pendiente').length;
    const badge = document.getElementById('consultasBadge');
    if (badge) {
        badge.textContent = pendientes;
        badge.style.display = pendientes > 0 ? 'inline-block' : 'none';
    }
}

// ========================================
// INSCRIPCIONES
// ========================================

let inscripciones = [];

async function loadInscripciones() {
    console.log('Cargando inscripciones...');
    
    try {
        const response = await fetch('api/inscripciones.php');
        const data = await response.json();
        
        if (data.success) {
            inscripciones = data.inscripciones;
            renderInscripcionesTable();
            updateInscripcionesBadge();
        } else {
            showExampleInscripciones();
        }
    } catch (error) {
        console.error('Error cargando inscripciones:', error);
        showExampleInscripciones();
    }
}

function renderInscripcionesTable() {
    const tbody = document.getElementById('inscripcionesTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = inscripciones.map(insc => `
        <tr>
            <td>${insc.id}</td>
            <td>${insc.nombre} ${insc.apellido || ''}</td>
            <td>${insc.email}</td>
            <td>${insc.dni || 'N/A'}</td>
            <td>${insc.orientacion || insc.ciclo || 'N/A'}</td>
            <td>${getEstadoInscripcionBadge(insc.estado_inscripcion || insc.estado)}</td>
            <td>${formatDate(insc.created_at)}</td>
            <td>${insc.tiene_documentos ? '‚úÖ' : '‚ùå'}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-success" onclick="aprobarInscripcion(${insc.id})" title="Aprobar">‚úîÔ∏è</button>
                    <button class="btn btn-sm btn-danger" onclick="rechazarInscripcion(${insc.id})" title="Rechazar">‚ùå</button>
                    <button class="btn btn-sm btn-secondary" onclick="verDetalleInscripcion(${insc.id})" title="Ver detalles">üëÅÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function showExampleInscripciones() {
    inscripciones = [
        { id: 1, nombre: 'Roberto', apellido: 'G√≥mez', email: 'roberto@email.com', dni: '12345678', orientacion: 'Primer Ciclo', estado: 'pendiente', created_at: '2024-11-10', tiene_documentos: true },
        { id: 2, nombre: 'Sofia', apellido: 'Torres', email: 'sofia@email.com', dni: '87654321', orientacion: 'Segundo Ciclo', estado: 'pendiente', created_at: '2024-11-11', tiene_documentos: false },
        { id: 3, nombre: 'Miguel', apellido: 'Ruiz', email: 'miguel@email.com', dni: '11223344', orientacion: 'Tercer Ciclo', estado: 'aprobada', created_at: '2024-11-09', tiene_documentos: true }
    ];
    renderInscripcionesTable();
}

function filtrarInscripciones() {
    const estadoFiltro = document.getElementById('filtroEstadoInscripcion')?.value || '';
    const cicloFiltro = document.getElementById('filtroCicloInsc')?.value || '';
    const busqueda = document.getElementById('buscarInscripcion')?.value.toLowerCase() || '';
    
    const inscripcionesFiltradas = inscripciones.filter(insc => {
        const cumpleEstado = !estadoFiltro || insc.estado === estadoFiltro || insc.estado_inscripcion === estadoFiltro;
        const cumpleCiclo = !cicloFiltro || insc.orientacion === cicloFiltro || insc.ciclo === cicloFiltro;
        const cumpleBusqueda = !busqueda || 
            insc.nombre.toLowerCase().includes(busqueda) ||
            (insc.apellido && insc.apellido.toLowerCase().includes(busqueda)) ||
            insc.email.toLowerCase().includes(busqueda) ||
            (insc.dni && insc.dni.includes(busqueda));
        
        return cumpleEstado && cumpleCiclo && cumpleBusqueda;
    });
    
    renderInscripcionesTableFiltered(inscripcionesFiltradas);
}

function renderInscripcionesTableFiltered(inscripcionesFiltradas) {
    const tbody = document.getElementById('inscripcionesTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = inscripcionesFiltradas.map(insc => `
        <tr>
            <td>${insc.id}</td>
            <td>${insc.nombre} ${insc.apellido || ''}</td>
            <td>${insc.email}</td>
            <td>${insc.dni || 'N/A'}</td>
            <td>${insc.orientacion || insc.ciclo || 'N/A'}</td>
            <td>${getEstadoInscripcionBadge(insc.estado_inscripcion || insc.estado)}</td>
            <td>${formatDate(insc.created_at)}</td>
            <td>${insc.tiene_documentos ? '‚úÖ' : '‚ùå'}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-success" onclick="aprobarInscripcion(${insc.id})">‚úîÔ∏è</button>
                    <button class="btn btn-sm btn-danger" onclick="rechazarInscripcion(${insc.id})">‚ùå</button>
                    <button class="btn btn-sm btn-secondary" onclick="verDetalleInscripcion(${insc.id})">üëÅÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

async function aprobarInscripcion(id) {
    if (confirm('¬øAprobar esta inscripci√≥n?')) {
        try {
            const response = await fetch('api/aprobar-inscripcion.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id })
            });
            
            const result = await response.json();
            
            if (result.success) {
                showNotification('‚úÖ Inscripci√≥n aprobada', 'success');
                loadInscripciones();
            } else {
                showNotification('‚ùå Error: ' + result.message, 'danger');
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al aprobar inscripci√≥n', 'danger');
        }
    }
}

async function rechazarInscripcion(id) {
    const motivo = prompt('Motivo del rechazo (opcional):');
    if (motivo !== null) {
        try {
            const response = await fetch('api/rechazar-inscripcion.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id, motivo })
            });
            
            const result = await response.json();
            
            if (result.success) {
                showNotification('‚úÖ Inscripci√≥n rechazada', 'success');
                loadInscripciones();
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al rechazar inscripci√≥n', 'danger');
        }
    }
}

function verDetalleInscripcion(id) {
    const insc = inscripciones.find(i => i.id === id);
    if (!insc) return;
    
    showNotification(`Viendo detalles de inscripci√≥n #${id}`, 'info');
    // Aqu√≠ se abrir√≠a un modal con los detalles completos
}

function updateInscripcionesBadge() {
    const pendientes = inscripciones.filter(i => i.estado === 'pendiente' || i.estado_inscripcion === 'pendiente').length;
    const badge = document.getElementById('inscripcionesBadge');
    if (badge) {
        badge.textContent = pendientes;
        badge.style.display = pendientes > 0 ? 'inline-block' : 'none';
    }
}

async function exportarInscripciones() {
    showNotification('üì• Exportando inscripciones...', 'info');
    // Implementar exportaci√≥n
}

// ========================================
// ESTUDIANTES
// ========================================

let estudiantes = [];

async function loadEstudiantes() {
    console.log('Cargando estudiantes...');
    
    try {
        const response = await fetch('api/estudiantes.php');
        const data = await response.json();
        
        if (data.success) {
            estudiantes = data.estudiantes;
            renderEstudiantesTable();
            updateEstudiantesStats();
        } else {
            showExampleEstudiantes();
        }
    } catch (error) {
        console.error('Error cargando estudiantes:', error);
        showExampleEstudiantes();
    }
}

function renderEstudiantesTable() {
    const tbody = document.getElementById('estudiantesTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = estudiantes.map(est => `
        <tr>
            <td>${est.legajo}</td>
            <td>${est.nombre} ${est.apellido}</td>
            <td>${est.email}</td>
            <td>${est.curso || 'N/A'}</td>
            <td>${est.orientacion || 'N/A'}</td>
            <td>${getEstadoBadge(est.estado === 'activo' ? 1 : 0)}</td>
            <td>${formatDate(est.fecha_ingreso)}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-secondary" onclick="verEstudiante(${est.usuario_id})" title="Ver">üëÅÔ∏è</button>
                    <button class="btn btn-sm btn-primary" onclick="editarEstudiante(${est.usuario_id})" title="Editar">‚úèÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="verCalificaciones(${est.usuario_id})" title="Calificaciones">üìä</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function showExampleEstudiantes() {
    estudiantes = [
        { usuario_id: 1, legajo: 'EST001', nombre: 'Juan', apellido: 'P√©rez', email: 'juan@epa703.edu.ar', curso: '1er A√±o A', orientacion: 'Primer Ciclo', estado: 'activo', fecha_ingreso: '2024-03-01' },
        { usuario_id: 2, legajo: 'EST002', nombre: 'Mar√≠a', apellido: 'Garc√≠a', email: 'maria@epa703.edu.ar', curso: '2do A√±o B', orientacion: 'Segundo Ciclo', estado: 'activo', fecha_ingreso: '2024-03-01' },
        { usuario_id: 3, legajo: 'EST003', nombre: 'Pedro', apellido: 'L√≥pez', email: 'pedro@epa703.edu.ar', curso: '3er A√±o A', orientacion: 'Tercer Ciclo', estado: 'activo', fecha_ingreso: '2024-03-01' }
    ];
    renderEstudiantesTable();
    updateEstudiantesStats();
}

function filtrarEstudiantes() {
    const estadoFiltro = document.getElementById('filtroEstadoEstudiante')?.value || '';
    const cursoFiltro = document.getElementById('filtroCurso')?.value || '';
    const orientacionFiltro = document.getElementById('filtroOrientacionEst')?.value || '';
    const busqueda = document.getElementById('buscarEstudiante')?.value.toLowerCase() || '';
    
    const estudiantesFiltrados = estudiantes.filter(est => {
        const cumpleEstado = !estadoFiltro || est.estado === estadoFiltro;
        const cumpleCurso = !cursoFiltro || est.curso === cursoFiltro;
        const cumpleOrientacion = !orientacionFiltro || est.orientacion === orientacionFiltro;
        const cumpleBusqueda = !busqueda || 
            est.nombre.toLowerCase().includes(busqueda) ||
            est.apellido.toLowerCase().includes(busqueda) ||
            est.legajo.toLowerCase().includes(busqueda) ||
            est.email.toLowerCase().includes(busqueda);
        
        return cumpleEstado && cumpleCurso && cumpleOrientacion && cumpleBusqueda;
    });
    
    renderEstudiantesTableFiltered(estudiantesFiltrados);
}

function renderEstudiantesTableFiltered(estudiantesFiltrados) {
    const tbody = document.getElementById('estudiantesTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = estudiantesFiltrados.map(est => `
        <tr>
            <td>${est.legajo}</td>
            <td>${est.nombre} ${est.apellido}</td>
            <td>${est.email}</td>
            <td>${est.curso || 'N/A'}</td>
            <td>${est.orientacion || 'N/A'}</td>
            <td>${getEstadoBadge(est.estado === 'activo' ? 1 : 0)}</td>
            <td>${formatDate(est.fecha_ingreso)}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-secondary" onclick="verEstudiante(${est.usuario_id})">üëÅÔ∏è</button>
                    <button class="btn btn-sm btn-primary" onclick="editarEstudiante(${est.usuario_id})">‚úèÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="verCalificaciones(${est.usuario_id})">üìä</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function updateEstudiantesStats() {
    const total = estudiantes.length;
    const activos = estudiantes.filter(e => e.estado === 'activo').length;
    const graduados = estudiantes.filter(e => e.estado === 'graduado').length;
    
    document.getElementById('estudiantesTotales').textContent = total;
    document.getElementById('estudiantesActivos').textContent = activos;
    document.getElementById('estudiantesGraduados').textContent = graduados;
    document.getElementById('estudiantesNuevos').textContent = '0'; // Calcular seg√∫n fecha
}

function verEstudiante(id) {
    showNotification(`Viendo estudiante #${id}`, 'info');
}

function editarEstudiante(id) {
    showNotification(`Editando estudiante #${id}`, 'info');
}

function verCalificaciones(id) {
    showNotification(`Viendo calificaciones del estudiante #${id}`, 'info');
}

async function exportarEstudiantes() {
    showNotification('üì• Exportando estudiantes...', 'info');
}

// ========================================
// PROFESORES
// ========================================

let profesores = [];

async function loadProfesores() {
    console.log('Cargando profesores...');
    
    try {
        const response = await fetch('api/profesores.php');
        const data = await response.json();
        
        if (data.success) {
            profesores = data.profesores;
            renderProfesoresTable();
            updateProfesoresStats();
        } else {
            showExampleProfesores();
        }
    } catch (error) {
        console.error('Error cargando profesores:', error);
        showExampleProfesores();
    }
}

function renderProfesoresTable() {
    const tbody = document.getElementById('profesoresTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = profesores.map(prof => `
        <tr>
            <td>${prof.legajo}</td>
            <td>${prof.nombre} ${prof.apellido}</td>
            <td>${prof.email}</td>
            <td>${prof.especialidad || 'N/A'}</td>
            <td>${prof.titulo || 'N/A'}</td>
            <td>${getEstadoBadge(prof.estado === 'activo' ? 1 : 0)}</td>
            <td>${formatDate(prof.fecha_ingreso)}</td>
            <td>${prof.carga_horaria || '0'} hs</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-secondary" onclick="verProfesor(${prof.usuario_id})" title="Ver">üëÅÔ∏è</button>
                    <button class="btn btn-sm btn-primary" onclick="editarProfesor(${prof.usuario_id})" title="Editar">‚úèÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="verMaterias(${prof.usuario_id})" title="Materias">üìö</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function showExampleProfesores() {
    profesores = [
        { usuario_id: 1, legajo: 'PROF001', nombre: 'Ana', apellido: 'Mart√≠nez', email: 'ana.martinez@epa703.edu.ar', especialidad: 'Lengua', titulo: 'Licenciada en Letras', estado: 'activo', fecha_ingreso: '2020-03-01', carga_horaria: 20 },
        { usuario_id: 2, legajo: 'PROF002', nombre: 'Carlos', apellido: 'Gonz√°lez', email: 'carlos.gonzalez@epa703.edu.ar', especialidad: 'Matem√°tica', titulo: 'Profesor de Matem√°tica', estado: 'activo', fecha_ingreso: '2019-03-01', carga_horaria: 18 },
        { usuario_id: 3, legajo: 'PROF003', nombre: 'Laura', apellido: 'Fern√°ndez', email: 'laura.fernandez@epa703.edu.ar', especialidad: 'Ciencias Naturales', titulo: 'Bi√≥loga', estado: 'activo', fecha_ingreso: '2021-03-01', carga_horaria: 15 }
    ];
    renderProfesoresTable();
    updateProfesoresStats();
}

function filtrarProfesores() {
    const estadoFiltro = document.getElementById('filtroEstadoProfesor')?.value || '';
    const especialidadFiltro = document.getElementById('filtroEspecialidad')?.value || '';
    const busqueda = document.getElementById('buscarProfesor')?.value.toLowerCase() || '';
    
    const profesoresFiltrados = profesores.filter(prof => {
        const cumpleEstado = !estadoFiltro || prof.estado === estadoFiltro;
        const cumpleEspecialidad = !especialidadFiltro || prof.especialidad === especialidadFiltro;
        const cumpleBusqueda = !busqueda || 
            prof.nombre.toLowerCase().includes(busqueda) ||
            prof.apellido.toLowerCase().includes(busqueda) ||
            prof.legajo.toLowerCase().includes(busqueda) ||
            (prof.especialidad && prof.especialidad.toLowerCase().includes(busqueda));
        
        return cumpleEstado && cumpleEspecialidad && cumpleBusqueda;
    });
    
    renderProfesoresTableFiltered(profesoresFiltrados);
}

function renderProfesoresTableFiltered(profesoresFiltrados) {
    const tbody = document.getElementById('profesoresTableBody');
    if (!tbody) return;
    
    tbody.innerHTML = profesoresFiltrados.map(prof => `
        <tr>
            <td>${prof.legajo}</td>
            <td>${prof.nombre} ${prof.apellido}</td>
            <td>${prof.email}</td>
            <td>${prof.especialidad || 'N/A'}</td>
            <td>${prof.titulo || 'N/A'}</td>
            <td>${getEstadoBadge(prof.estado === 'activo' ? 1 : 0)}</td>
            <td>${formatDate(prof.fecha_ingreso)}</td>
            <td>${prof.carga_horaria || '0'} hs</td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-sm btn-secondary" onclick="verProfesor(${prof.usuario_id})">üëÅÔ∏è</button>
                    <button class="btn btn-sm btn-primary" onclick="editarProfesor(${prof.usuario_id})">‚úèÔ∏è</button>
                    <button class="btn btn-sm btn-warning" onclick="verMaterias(${prof.usuario_id})">üìö</button>
                </div>
            </td>
        </tr>
    `).join('');
}

function updateProfesoresStats() {
    const total = profesores.length;
    const activos = profesores.filter(p => p.estado === 'activo').length;
    const licencia = profesores.filter(p => p.estado === 'licencia').length;
    
    document.getElementById('profesoresTotales').textContent = total;
    document.getElementById('profesoresActivos').textContent = activos;
    document.getElementById('profesoresLicencia').textContent = licencia;
    document.getElementById('profesoresNuevos').textContent = '0';
}

function verProfesor(id) {
    showNotification(`Viendo profesor #${id}`, 'info');
}

function editarProfesor(id) {
    showNotification(`Editando profesor #${id}`, 'info');
}

function verMaterias(id) {
    showNotification(`Viendo materias asignadas al profesor #${id}`, 'info');
}

async function exportarProfesores() {
    showNotification('üì• Exportando profesores...', 'info');
}

// ========================================
// CURSOS
// ========================================

let cursos = [];

async function loadCursos() {
    console.log('Cargando cursos...');
    
    try {
        const response = await fetch('api/cursos.php');
        const data = await response.json();
        
        if (data.success) {
            cursos = data.cursos;
            renderCursosGrid();
        } else {
            showExampleCursos();
        }
    } catch (error) {
        console.error('Error cargando cursos:', error);
        showExampleCursos();
    }
}

function renderCursosGrid() {
    const grid = document.getElementById('cursosGrid');
    if (!grid) return;
    
    grid.innerHTML = cursos.map(curso => `
        <div class="curso-card">
            <div class="curso-header">
                <h3>${curso.nombre}</h3>
                <span class="curso-badge">${curso.turno}</span>
            </div>
            <div class="curso-body">
                <p><strong>A√±o:</strong> ${curso.anio}</p>
                <p><strong>Divisi√≥n:</strong> ${curso.division}</p>
                <p><strong>Orientaci√≥n:</strong> ${curso.orientacion || 'N/A'}</p>
                <p><strong>Estudiantes:</strong> ${curso.cantidad_estudiantes || 0}</p>
                <p><strong>Capacidad:</strong> ${curso.capacidad_maxima || 'N/A'}</p>
            </div>
            <div class="curso-actions">
                <button class="btn btn-sm btn-secondary" onclick="verCurso(${curso.id})">Ver detalles</button>
                <button class="btn btn-sm btn-primary" onclick="editarCurso(${curso.id})">Editar</button>
            </div>
        </div>
    `).join('');
}

function showExampleCursos() {
    cursos = [
        { id: 1, nombre: '1er A√±o A', anio: 1, division: 'A', turno: 'Ma√±ana', orientacion: 'Primer Ciclo', cantidad_estudiantes: 22, capacidad_maxima: 25 },
        { id: 2, nombre: '2do A√±o B', anio: 2, division: 'B', turno: 'Tarde', orientacion: 'Segundo Ciclo', cantidad_estudiantes: 18, capacidad_maxima: 25 },
        { id: 3, nombre: '3er A√±o A', anio: 3, division: 'A', turno: 'Noche', orientacion: 'Tercer Ciclo', cantidad_estudiantes: 20, capacidad_maxima: 25 }
    ];
    renderCursosGrid();
}

function verCurso(id) {
    showNotification(`Viendo curso #${id}`, 'info');
}

function editarCurso(id) {
    showNotification(`Editando curso #${id}`, 'info');
}

// ========================================
// FUNCIONES DE UTILIDAD
// ========================================

function getTipoBadge(tipo) {
    const badges = {
        'admin': '<span class="badge badge-danger">Admin</span>',
        'profesor': '<span class="badge badge-info">Profesor</span>',
        'estudiante': '<span class="badge badge-success">Estudiante</span>',
        'secretario': '<span class="badge badge-warning">Secretario</span>'
    };
    return badges[tipo] || '<span class="badge badge-secondary">Desconocido</span>';
}

function getEstadoBadge(activo) {
    return activo == 1 ? 
        '<span class="badge badge-success">Activo</span>' : 
        '<span class="badge badge-secondary">Inactivo</span>';
}

function getEstadoConsultaBadge(estado) {
    const badges = {
        'pendiente': '<span class="badge badge-warning">Pendiente</span>',
        'respondida': '<span class="badge badge-info">Respondida</span>',
        'cerrada': '<span class="badge badge-secondary">Cerrada</span>'
    };
    return badges[estado] || '<span class="badge badge-secondary">Desconocido</span>';
}

function getTipoConsultaBadge(tipo) {
    const badges = {
        'general': '<span class="badge badge-secondary">General</span>',
        'inscripcion': '<span class="badge badge-primary">Inscripci√≥n</span>',
        'academica': '<span class="badge badge-info">Acad√©mica</span>',
        'administrativa': '<span class="badge badge-warning">Administrativa</span>'
    };
    return badges[tipo] || '<span class="badge badge-secondary">Otra</span>';
}

function getPrioridadBadge(prioridad) {
    const badges = {
        'urgente': '<span class="badge badge-danger">Urgente</span>',
        'alta': '<span class="badge badge-warning">Alta</span>',
        'media': '<span class="badge badge-info">Media</span>',
        'baja': '<span class="badge badge-secondary">Baja</span>'
    };
    return badges[prioridad] || '<span class="badge badge-info">Media</span>';
}

function getEstadoInscripcionBadge(estado) {
    const badges = {
        'pendiente': '<span class="badge badge-warning">Pendiente</span>',
        'aprobada': '<span class="badge badge-success">Aprobada</span>',
        'rechazada': '<span class="badge badge-danger">Rechazada</span>'
    };
    return badges[estado] || '<span class="badge badge-secondary">Desconocido</span>';
}

function formatDate(dateString) {
    if (!dateString) return 'N/A';
    
    const date = new Date(dateString);
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    
    return `${day}/${month}/${year}`;
}

function logout() {
    if (confirm('¬øSeguro que deseas cerrar sesi√≥n?')) {
        fetch('api/logout.php', { method: 'POST' })
            .then(() => {
                window.location.href = 'login.html?logout=success';
            })
            .catch(error => {
                console.error('Error en logout:', error);
                window.location.href = 'login.html';
            });
    }
}

// ========================================
// ESTILOS CSS ADICIONALES
// ========================================

// Agregar estilos para badges si no existen
const style = document.createElement('style');
style.textContent = `
    .badge {
        display: inline-block;
        padding: 4px 8px;
        font-size: 11px;
        font-weight: 600;
        line-height: 1;
        text-align: center;
        white-space: nowrap;
        vertical-align: baseline;
        border-radius: 4px;
    }
    
    .badge-primary { background-color: #007bff; color: white; }
    .badge-secondary { background-color: #6c757d; color: white; }
    .badge-success { background-color: #28a745; color: white; }
    .badge-danger { background-color: #dc3545; color: white; }
    .badge-warning { background-color: #ffc107; color: #212529; }
    .badge-info { background-color: #17a2b8; color: white; }
    
    .action-buttons {
        display: flex;
        gap: 5px;
        justify-content: center;
    }
    
    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes slideOutRight {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }
    
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 9999;
        justify-content: center;
        align-items: center;
    }
    
    .modal.active {
        display: flex;
    }
    
    .curso-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #e0e0e0;
    }
    
    .curso-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .curso-header h3 {
        margin: 0;
        color: #1e3a2e;
    }
    
    .curso-badge {
        background: #1e3a2e;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
    }
    
    .curso-body p {
        margin: 8px 0;
        color: #666;
    }
    
    .curso-actions {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #e0e0e0;
    }
    
    #cursosGrid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
`;

document.head.appendChild(style);

console.log('‚úÖ Panel de Administrador - Todas las funciones cargadas correctamente');
/**
 * EPA 703 - Funciones de Reportes y Configuraci√≥n
 * JavaScript para las secciones completas del panel de administrador
 */

// ========================================
// FUNCIONES DE REPORTES
// ========================================

/**
 * Cambiar entre tabs de reportes
 */
function showReportTab(tabName) {
    // Ocultar todos los tabs
    document.querySelectorAll('#reportes .tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Quitar active de todos los botones
    document.querySelectorAll('#reportes .tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Mostrar tab seleccionado
    const selectedTab = document.getElementById(`tab-${tabName}`);
    if (selectedTab) {
        selectedTab.classList.add('active');
    }
    
    // Activar bot√≥n correspondiente
    event.target.classList.add('active');
    
    // Cargar datos del tab si es necesario
    if (tabName === 'estudiantes') {
        cargarEstadisticasEstudiantes();
    } else if (tabName === 'general') {
        cargarGraficos();
    }
}

/**
 * Generar reportes generales
 */
async function generarReporte(tipo, formato) {
    console.log(`Generando reporte ${tipo} en formato ${formato}...`);
    
    if (formato === 'preview') {
        // Mostrar vista previa en modal
        showNotification(`Vista previa del reporte ${tipo}`, 'info');
        // Aqu√≠ ir√≠a la l√≥gica para mostrar el modal con la vista previa
    } else {
        // Descargar archivo
        try {
            const response = await fetch(`api/reportes.php?tipo=${tipo}&formato=${formato}`);
            if (response.ok) {
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `reporte_${tipo}_${new Date().getTime()}.${formato}`;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
                
                showNotification(`‚úÖ Reporte ${tipo} descargado exitosamente`, 'success');
            } else {
                throw new Error('Error al generar reporte');
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification(`‚ùå Error al generar reporte: ${error.message}`, 'danger');
        }
    }
}

/**
 * Cargar gr√°ficos de reportes
 */
function cargarGraficos() {
    console.log('Cargando gr√°ficos de reportes...');
    
    // Simulaci√≥n de datos - en producci√≥n vendr√≠a de la API
    const datosInscripciones = {
        labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
        data: [15, 18, 22, 20, 25, 30, 28, 35, 32, 30, 28, 25]
    };
    
    // Aqu√≠ ir√≠an las llamadas a Chart.js o la librer√≠a de gr√°ficos elegida
    console.log('Datos para gr√°ficos:', datosInscripciones);
    showNotification('Gr√°ficos cargados', 'info');
}

/**
 * Generar reporte de estudiantes con filtros
 */
async function generarReporteEstudiantes() {
    const filtros = {
        ciclo: document.getElementById('reporteCiclo')?.value || '',
        estado: document.getElementById('reporteEstado')?.value || '',
        fechaDesde: document.getElementById('reporteFechaDesde')?.value || '',
        fechaHasta: document.getElementById('reporteFechaHasta')?.value || ''
    };
    
    console.log('Generando reporte de estudiantes con filtros:', filtros);
    
    try {
        const response = await fetch('api/reportes-estudiantes.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(filtros)
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Actualizar estad√≠sticas
            document.getElementById('reporteEstTotal').textContent = data.stats.total;
            document.getElementById('reporteEstActivos').textContent = data.stats.activos;
            document.getElementById('reporteEstGraduados').textContent = data.stats.graduados;
            document.getElementById('reporteEstDesercion').textContent = data.stats.desercion + '%';
            
            showNotification('‚úÖ Reporte generado exitosamente', 'success');
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al generar reporte', 'danger');
    }
}

/**
 * Exportar reporte de estudiantes
 */
async function exportarReporteEstudiantes(formato) {
    const filtros = {
        ciclo: document.getElementById('reporteCiclo')?.value || '',
        estado: document.getElementById('reporteEstado')?.value || '',
        fechaDesde: document.getElementById('reporteFechaDesde')?.value || '',
        fechaHasta: document.getElementById('reporteFechaHasta')?.value || '',
        formato: formato
    };
    
    console.log(`Exportando reporte de estudiantes en ${formato}...`);
    
    try {
        const response = await fetch('api/exportar-estudiantes.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(filtros)
        });
        
        if (response.ok) {
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const extension = formato === 'excel' ? 'xlsx' : 'pdf';
            a.download = `reporte_estudiantes_${new Date().getTime()}.${extension}`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
            
            showNotification(`‚úÖ Reporte exportado en ${formato}`, 'success');
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al exportar reporte', 'danger');
    }
}

/**
 * Funciones de reportes de profesores
 */
async function exportarProfesores(formato) {
    console.log(`Exportando profesores en ${formato}...`);
    showNotification(`Generando reporte de profesores en ${formato}...`, 'info');
    // Implementar l√≥gica de exportaci√≥n
}

async function reporteCargaHoraria(formato) {
    console.log(`Generando reporte de carga horaria en ${formato}...`);
    showNotification('Generando reporte de carga horaria...', 'info');
    // Implementar l√≥gica
}

async function reporteAsignaciones(formato) {
    console.log(`Generando reporte de asignaciones en ${formato}...`);
    showNotification('Generando reporte de asignaciones...', 'info');
    // Implementar l√≥gica
}

/**
 * Funciones de reportes acad√©micos
 */
function verRendimiento() {
    console.log('Mostrando rendimiento acad√©mico...');
    showNotification('Cargando rendimiento acad√©mico...', 'info');
}

function exportarRendimiento(formato) {
    console.log(`Exportando rendimiento en ${formato}...`);
    showNotification(`Generando reporte de rendimiento...`, 'info');
}

function verAsistencias() {
    console.log('Mostrando asistencias...');
    showNotification('Cargando asistencias...', 'info');
}

function exportarAsistencias(formato) {
    console.log(`Exportando asistencias en ${formato}...`);
    showNotification('Generando reporte de asistencias...', 'info');
}

function verCertificados() {
    console.log('Mostrando certificados...');
    showNotification('Cargando certificados emitidos...', 'info');
}

function exportarCertificados(formato) {
    console.log(`Exportando certificados en ${formato}...`);
    showNotification('Generando reporte de certificados...', 'info');
}

function verTasaFinalizacion() {
    console.log('Mostrando tasa de finalizaci√≥n...');
    showNotification('Cargando tasa de finalizaci√≥n...', 'info');
}

function exportarTasaFinalizacion(formato) {
    console.log(`Exportando tasa de finalizaci√≥n en ${formato}...`);
    showNotification('Generando reporte...', 'info');
}

/**
 * Cargar estad√≠sticas de estudiantes para reportes
 */
async function cargarEstadisticasEstudiantes() {
    try {
        const response = await fetch('api/estadisticas-estudiantes.php');
        const data = await response.json();
        
        if (data.success) {
            document.getElementById('reporteEstTotal').textContent = data.total || '0';
            document.getElementById('reporteEstActivos').textContent = data.activos || '0';
            document.getElementById('reporteEstGraduados').textContent = data.graduados || '0';
            document.getElementById('reporteEstDesercion').textContent = (data.desercion || 0) + '%';
        }
    } catch (error) {
        console.error('Error cargando estad√≠sticas:', error);
    }
}

// ========================================
// FUNCIONES DE CONFIGURACI√ìN
// ========================================

/**
 * Cambiar entre tabs de configuraci√≥n
 */
function showConfigTab(tabName) {
    // Ocultar todos los tabs
    document.querySelectorAll('#configuracion .tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Quitar active de todos los botones
    document.querySelectorAll('#configuracion .tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Mostrar tab seleccionado
    const selectedTab = document.getElementById(`config-${tabName}`);
    if (selectedTab) {
        selectedTab.classList.add('active');
    }
    
    // Activar bot√≥n correspondiente
    event.target.classList.add('active');
    
    // Cargar configuraci√≥n si es necesario
    if (tabName === 'general') {
        cargarConfigGeneral();
    } else if (tabName === 'email') {
        cargarConfigEmail();
    }
}

/**
 * Cargar configuraci√≥n general
 */
async function cargarConfigGeneral() {
    try {
        const response = await fetch('api/config.php?seccion=general');
        const data = await response.json();
        
        if (data.success) {
            // Llenar campos con la configuraci√≥n actual
            Object.keys(data.config).forEach(key => {
                const input = document.getElementById(`config_${key}`);
                if (input) {
                    input.value = data.config[key];
                }
            });
        }
    } catch (error) {
        console.error('Error cargando configuraci√≥n:', error);
    }
}

/**
 * Guardar configuraci√≥n general
 */
document.getElementById('formConfigGeneral')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const config = Object.fromEntries(formData);
    
    try {
        const response = await fetch('api/guardar-config.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ seccion: 'general', config })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Configuraci√≥n guardada exitosamente', 'success');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al guardar configuraci√≥n: ' + error.message, 'danger');
    }
});

/**
 * Restablecer configuraci√≥n general
 */
function resetConfigGeneral() {
    if (confirm('¬øEst√°s seguro de restablecer la configuraci√≥n general a los valores por defecto?')) {
        cargarConfigGeneral();
        showNotification('Configuraci√≥n restablecida', 'info');
    }
}

/**
 * Guardar configuraci√≥n de redes sociales
 */
document.getElementById('formConfigRedes')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const config = Object.fromEntries(formData);
    
    try {
        const response = await fetch('api/guardar-config.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ seccion: 'redes', config })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Redes sociales actualizadas', 'success');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al guardar: ' + error.message, 'danger');
    }
});

/**
 * Cargar configuraci√≥n de email
 */
async function cargarConfigEmail() {
    try {
        const response = await fetch('api/config.php?seccion=email');
        const data = await response.json();
        
        if (data.success) {
            Object.keys(data.config).forEach(key => {
                const input = document.getElementById(`config_${key}`);
                if (input && key !== 'smtp_pass') { // No mostrar contrase√±a
                    input.value = data.config[key];
                }
            });
        }
    } catch (error) {
        console.error('Error cargando configuraci√≥n de email:', error);
    }
}

/**
 * Guardar configuraci√≥n de email
 */
document.getElementById('formConfigEmail')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const config = Object.fromEntries(formData);
    
    // No enviar contrase√±a si est√° vac√≠a
    if (!config.smtp_pass) {
        delete config.smtp_pass;
    }
    
    try {
        const response = await fetch('api/guardar-config.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ seccion: 'email', config })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Configuraci√≥n de email guardada', 'success');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al guardar: ' + error.message, 'danger');
    }
});

/**
 * Probar configuraci√≥n de email
 */
async function probarEmail() {
    showNotification('üìß Enviando email de prueba...', 'info');
    
    try {
        const response = await fetch('api/test-email.php', {
            method: 'POST'
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Email de prueba enviado exitosamente', 'success');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al enviar email: ' + error.message, 'danger');
    }
}

/**
 * Editar plantilla de email
 */
function editarPlantilla(tipo) {
    console.log(`Editando plantilla de ${tipo}...`);
    showNotification(`Abriendo editor de plantilla: ${tipo}`, 'info');
    // Aqu√≠ se abrir√≠a un modal con el editor de la plantilla
}

/**
 * Guardar configuraci√≥n acad√©mica
 */
document.getElementById('formConfigAcademico')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const config = Object.fromEntries(formData);
    
    try {
        const response = await fetch('api/guardar-config.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ seccion: 'academico', config })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Configuraci√≥n acad√©mica guardada', 'success');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al guardar: ' + error.message, 'danger');
    }
});

/**
 * Editar configuraci√≥n de ciclo
 */
function editarCiclo(numeroCiclo) {
    console.log(`Editando configuraci√≥n del ciclo ${numeroCiclo}...`);
    showNotification(`Editando Ciclo ${numeroCiclo}`, 'info');
    // Aqu√≠ se abrir√≠a un modal para editar el ciclo
}

/**
 * Guardar configuraci√≥n de usuarios
 */
document.getElementById('formConfigUsuarios')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const config = Object.fromEntries(formData);
    
    try {
        const response = await fetch('api/guardar-config.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ seccion: 'usuarios', config })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Configuraci√≥n de usuarios guardada', 'success');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al guardar: ' + error.message, 'danger');
    }
});

/**
 * Funciones de mantenimiento del sistema
 */
async function limpiarCache() {
    if (confirm('¬øDeseas limpiar la cach√© del sistema?')) {
        showNotification('üóëÔ∏è Limpiando cach√©...', 'info');
        
        try {
            const response = await fetch('api/mantenimiento.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'clear_cache' })
            });
            
            const data = await response.json();
            
            if (data.success) {
                showNotification('‚úÖ Cach√© limpiada exitosamente', 'success');
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al limpiar cach√©', 'danger');
        }
    }
}

async function optimizarDB() {
    if (confirm('¬øDeseas optimizar la base de datos? Esto puede tomar varios minutos.')) {
        showNotification('‚ö° Optimizando base de datos...', 'info');
        
        try {
            const response = await fetch('api/mantenimiento.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'optimize_db' })
            });
            
            const data = await response.json();
            
            if (data.success) {
                showNotification('‚úÖ Base de datos optimizada', 'success');
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al optimizar base de datos', 'danger');
        }
    }
}

async function backupDB() {
    if (confirm('¬øDeseas crear un backup de la base de datos?')) {
        showNotification('üíæ Creando backup...', 'info');
        
        try {
            const response = await fetch('api/mantenimiento.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'backup_db' })
            });
            
            if (response.ok) {
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `backup_epa703_${new Date().getTime()}.sql`;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
                
                showNotification('‚úÖ Backup creado y descargado', 'success');
            } else {
                throw new Error('Error al crear backup');
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al crear backup', 'danger');
        }
    }
}

function confirmarMantenimiento() {
    if (confirm('‚ö†Ô∏è ¬øActivar modo mantenimiento? Los usuarios no podr√°n acceder al sistema.')) {
        activarModoMantenimiento();
    }
}

async function activarModoMantenimiento() {
    showNotification('üîß Activando modo mantenimiento...', 'info');
    
    try {
        const response = await fetch('api/mantenimiento.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'maintenance_mode', enabled: true })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Modo mantenimiento activado', 'warning');
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al activar modo mantenimiento', 'danger');
    }
}

/**
 * Cargar logs del sistema
 */
async function cargarLogs() {
    const tipoLog = document.getElementById('logTipo')?.value || 'todos';
    const logsContent = document.getElementById('logsContent');
    
    if (!logsContent) return;
    
    logsContent.innerHTML = '<p style="text-align: center; color: #666;">Cargando logs...</p>';
    
    try {
        const response = await fetch(`api/logs.php?tipo=${tipoLog}`);
        const data = await response.json();
        
        if (data.success && data.logs.length > 0) {
            logsContent.innerHTML = data.logs.map(log => 
                `<div class="log-entry">
                    <span class="log-time">[${log.timestamp}]</span>
                    <span class="log-level log-${log.level}">${log.level.toUpperCase()}</span>
                    <span class="log-message">${log.message}</span>
                </div>`
            ).join('');
        } else {
            logsContent.innerHTML = '<p style="text-align: center; color: #666;">No hay logs disponibles</p>';
        }
    } catch (error) {
        console.error('Error:', error);
        logsContent.innerHTML = '<p style="text-align: center; color: #d32f2f;">Error al cargar logs</p>';
    }
}

/**
 * Limpiar logs
 */
async function limpiarLogs() {
    if (confirm('‚ö†Ô∏è ¬øEst√°s seguro de eliminar todos los logs? Esta acci√≥n no se puede deshacer.')) {
        try {
            const response = await fetch('api/logs.php', {
                method: 'DELETE'
            });
            
            const data = await response.json();
            
            if (data.success) {
                showNotification('‚úÖ Logs eliminados', 'success');
                cargarLogs();
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            console.error('Error:', error);
            showNotification('‚ùå Error al eliminar logs', 'danger');
        }
    }
}

/**
 * Funciones de zona de peligro
 */
function confirmarReiniciarSistema() {
    if (confirm('‚ö†Ô∏è ADVERTENCIA: ¬øReiniciar el sistema? Todos los usuarios ser√°n desconectados.')) {
        if (confirm('¬øEst√°s completamente seguro? Esta es tu √∫ltima oportunidad para cancelar.')) {
            reiniciarSistema();
        }
    }
}

async function reiniciarSistema() {
    showNotification('üîÑ Reiniciando sistema...', 'warning');
    
    try {
        const response = await fetch('api/sistema.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'restart' })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Sistema reiniciado', 'success');
            setTimeout(() => window.location.reload(), 3000);
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al reiniciar sistema', 'danger');
    }
}

function confirmarResetearConfig() {
    if (confirm('‚ö†Ô∏è PELIGRO: ¬øRestablecer TODA la configuraci√≥n a valores por defecto?')) {
        if (confirm('Esta acci√≥n eliminar√° todas las configuraciones personalizadas. ¬øContinuar?')) {
            resetearConfig();
        }
    }
}

async function resetearConfig() {
    showNotification('‚Ü∫ Restableciendo configuraci√≥n...', 'warning');
    
    try {
        const response = await fetch('api/sistema.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'reset_config' })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Configuraci√≥n restablecida', 'success');
            setTimeout(() => window.location.reload(), 2000);
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error al restablecer configuraci√≥n', 'danger');
    }
}

function confirmarEliminarDatos() {
    if (confirm('‚ö†Ô∏è PELIGRO EXTREMO: ¬øEliminar todos los datos de prueba?')) {
        if (confirm('Esto eliminar√° estudiantes, profesores y registros de prueba. ¬øDEFINITIVAMENTE continuar?')) {
            const password = prompt('Ingresa la contrase√±a de administrador para confirmar:');
            if (password) {
                eliminarDatosPrueba(password);
            }
        }
    }
}

async function eliminarDatosPrueba(password) {
    showNotification('‚ö†Ô∏è Eliminando datos de prueba...', 'warning');
    
    try {
        const response = await fetch('api/sistema.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'delete_test_data', password })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showNotification('‚úÖ Datos de prueba eliminados', 'success');
            setTimeout(() => window.location.reload(), 2000);
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('‚ùå Error: ' + error.message, 'danger');
    }
}

/**
 * Mostrar notificaci√≥n (reutiliza la funci√≥n del dashboard)
 */
function showNotification(message, type = 'info') {
    // Si existe la funci√≥n global del dashboard, usarla
    if (window.dashboardInstance && window.dashboardInstance.showNotification) {
        window.dashboardInstance.showNotification(message, type);
        return;
    }
    
    // Sino, mostrar alert simple
    const icons = {
        success: '‚úÖ',
        danger: '‚ùå',
        warning: '‚ö†Ô∏è',
        info: '‚ÑπÔ∏è'
    };
    
    console.log(`${icons[type] || '‚ÑπÔ∏è'} ${message}`);
    
    // Crear notificaci√≥n visual si no existe el dashboard
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        background: ${type === 'success' ? '#28a745' : type === 'danger' ? '#dc3545' : type === 'warning' ? '#ffc107' : '#17a2b8'};
        color: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        z-index: 10000;
        animation: slideInRight 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

console.log('‚úÖ M√≥dulos de Reportes y Configuraci√≥n cargados correctamente');


</script>
<script src="js/logout-universal.js"></script>
<script src="js/admin-dashboard.js"></script>
</body>
</html>